<?xml version="1.0" encoding="UTF-8"?><record_update table="wf_workflow_version">
    <wf_workflow_version action="INSERT_OR_UPDATE">
        <active>true</active>
        <activity_stages>{"subflows":[],"stages":{},"activities":{},"ends":["1dc9ecca1b8d4e106962fe60cd4bcb47"]}</activity_stages>
        <after_business_rules>false</after_business_rules>
        <checked_out/>
        <checked_out_by/>
        <column_renderer display_value="Workflow-driven">a56213111b030100adca1e094f0713ac</column_renderer>
        <condition/>
        <condition_type>run_match</condition_type>
        <description>Alert Building Access request  workflow</description>
        <expected_sequences>d1c9ecca1b8d4e106962fe60cd4bcb4f,55c9ecca1b8d4e106962fe60cd4bcb45,ddc9ecca1b8d4e106962fe60cd4bcb46,ddc9ecca1b8d4e106962fe60cd4bcb4d,1dc9ecca1b8d4e106962fe60cd4bcb47</expected_sequences>
        <expected_time>1970-01-01 14:00:00</expected_time>
        <expected_time_type/>
        <full_sequences>d1c9ecca1b8d4e106962fe60cd4bcb4f,55c9ecca1b8d4e106962fe60cd4bcb45,ddc9ecca1b8d4e106962fe60cd4bcb46,ddc9ecca1b8d4e106962fe60cd4bcb4d,1dc9ecca1b8d4e106962fe60cd4bcb47</full_sequences>
        <journal/>
        <max_activity_count>100</max_activity_count>
        <name>Alert Building Access</name>
        <not_cacheable>false</not_cacheable>
        <on_cancel><![CDATA[// This script executes if the workflow is cancelled.// The global variable context_sys_id contains the sys_id of the cancelled workflow context.]]></on_cancel>
        <order>100</order>
        <pin_type>set_by_activity</pin_type>
        <published>true</published>
        <relative_duration display_value="2 business days by 4pm">3bf802c20a0a0b52008e2859cd8abcf2</relative_duration>
        <requires_ert>true</requires_ert>
        <run_multiple>false</run_multiple>
        <schedule/>
        <stage_field/>
        <stage_order>computed</stage_order>
        <start display_value="Begin">d1c9ecca1b8d4e106962fe60cd4bcb4f</start>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>ddc924ca1b8d4e106962fe60cd4bcb22</sys_id>
        <sys_mod_count>32</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:41:48</sys_updated_on>
        <table>x_aleen_alertsnowp_building_access</table>
        <timezone/>
        <validated>false</validated>
        <workflow display_value="Alert Building Access">0a0daca21bbe81108dcc755e034bcbe8</workflow>
    </wf_workflow_version>
    <wf_workflow action="INSERT_OR_UPDATE">
        <access>public</access>
        <description>Alert Building Access request  workflow</description>
        <name>Alert Building Access</name>
        <preview/>
        <sys_class_name>wf_workflow</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-04-14 10:17:18</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>0a0daca21bbe81108dcc755e034bcbe8</sys_id>
        <sys_mod_count>4</sys_mod_count>
        <sys_name>Alert Building Access</sys_name>
        <sys_overrides/>
        <sys_package display_value="Workplace Access and Security" source="x_aleen_alertsnowp">87fbe6c21b7e41108dcc755e034bcb8e</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Workplace Access and Security">87fbe6c21b7e41108dcc755e034bcb8e</sys_scope>
        <sys_update_name>wf_workflow_0a0daca21bbe81108dcc755e034bcbe8</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-04-14 10:30:37</sys_updated_on>
        <table>x_aleen_alertsnowp_building_access</table>
        <template>false</template>
        <vars/>
    </wf_workflow>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Begin">c7a5e32c0a0a0b3a002377c24ed8ea76</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>1</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>Begin</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d1c9ecca1b8d4e106962fe60cd4bcb4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="Alert Building Access">ddc924ca1b8d4e106962fe60cd4bcb22</workflow_version>
        <x>20</x>
        <y>20</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=d1c9ecca1b8d4e106962fe60cd4bcb4f"/>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Begin">d1c9ecca1b8d4e106962fe60cd4bcb4f</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>99c9ecca1b8d4e106962fe60cd4bcb4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>11</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Create Access Level Task for Area Owner</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>ddc9ecca1b8d4e106962fe60cd4bcb46</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:41:31</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Alert Building Access">ddc924ca1b8d4e106962fe60cd4bcb22</workflow_version>
        <x>388</x>
        <y>8</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=ddc9ecca1b8d4e106962fe60cd4bcb46"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>ddc9ecca1b8d4e106962fe60cd4bcb46</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>51c9ecca1b8d4e106962fe60cd4bcb47</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>var accessLevels = current.access_levels;&#13;
var accessLevelsList = accessLevels.split(',');&#13;
var singleOwnerRecords = [];&#13;
var lowAccessLevelRecords = [];&#13;
var needApproval = false;&#13;
for (var i = 0; i &lt; accessLevelsList.length; i++) {&#13;
    needApproval = false;&#13;
	gs.info(accessLevelsList[i]);&#13;
	var accessLevelLocationGr = new GlideRecordSecure('x_aleen_alertsnowp_accesslocations');&#13;
    if (accessLevelLocationGr.get(accessLevelsList[i])) {&#13;
	gs.info("got accesslevel Location record  of " + accessLevelLocationGr.access_level_name);&#13;
    var accessLevelGr = new GlideRecordSecure('x_aleen_alertsnowp_access_levels');&#13;
    if (accessLevelGr.get(accessLevelLocationGr.access_level)) {&#13;
        var count = 0;&#13;
        var gr = new GlideAggregate('x_aleen_alertsnowp_area_owners');&#13;
        gr.addQuery('access_level_id', accessLevelGr.access_level_id);&#13;
        gr.addAggregate('COUNT');&#13;
        gr.query();&#13;
        while (gr.next()) {&#13;
            count = gr.getAggregate('COUNT');&#13;
        }&#13;
        if (count == 0) {&#13;
			gs.info(accessLevelGr.access_level_name +"  has no Area owners");&#13;
            if (accessLevelGr.criticality == "LOW") {&#13;
                if (lowAccessLevelRecords.length &gt; 0) {&#13;
                    lowAccessLevelRecords[0]['access_level_id'] = lowAccessLevelRecords[0]['access_level_id'] + "," + accessLevelGr.access_level_id;&#13;
                    lowAccessLevelRecords[0]['access_level_name'] = lowAccessLevelRecords[0]['access_level_name'] + "," + accessLevelGr.access_level_name;&#13;
					lowAccessLevelRecords[0]['sourceid'] = lowAccessLevelRecords[0]['sourceid'] + "###" + accessLevelGr.access_level_id;&#13;
                } else {&#13;
                    var lmap = {};&#13;
                    lmap['access_level_id'] = accessLevelGr.access_level_id;&#13;
                    lmap['access_level_name'] = accessLevelGr.access_level_name;&#13;
					lmap['sourceid'] = accessLevelGr.access_level_id;&#13;
                    lowAccessLevelRecords.push(lmap);&#13;
                }&#13;
            } else {&#13;
                needApproval = true;&#13;
                foundIndex = -1;&#13;
                for (var icv = 0; icv &lt; singleOwnerRecords.length; icv++) {&#13;
                    if (singleOwnerRecords[icv]['approver'] === "DEFAULT") {&#13;
                        foundIndex = icv;&#13;
                        break;&#13;
                    }&#13;
                }&#13;
                if (foundIndex &gt; -1) {&#13;
                    singleOwnerRecords[foundIndex]['access_level_id'] = singleOwnerRecords[foundIndex]['access_level_id'] + "," + accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords[foundIndex]['access_level_name'] = singleOwnerRecords[foundIndex]['access_level_name'] + "," + accessLevelGr.access_level_name;&#13;
					singleOwnerRecords[foundIndex]['sourceid'] = singleOwnerRecords[foundIndex]['sourceid'] + "###" + accessLevelGr.access_level_id;&#13;
                } else {&#13;
                    var mapa = {};&#13;
                    mapa['approver'] = "DEFAULT";&#13;
                    mapa['access_level_id'] = accessLevelGr.access_level_id;&#13;
                    mapa['access_level_name'] = accessLevelGr.access_level_name;&#13;
					mapa['sourceid'] = accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords.push(mapa);&#13;
                }&#13;
            }&#13;
        } else {&#13;
            needApproval = true;&#13;
        }&#13;
        if (count == 1) {&#13;
			gs.info(accessLevelGr.access_level_name +"  has one Area owner");&#13;
            var grAO = new GlideRecordSecure('x_aleen_alertsnowp_area_owners');&#13;
            grAO.addQuery('access_level_id', accessLevelGr.access_level_id);&#13;
            grAO.query();&#13;
            while (grAO.next()) {&#13;
                var refSysUser = grAO.owner.getRefRecord();&#13;
                var approverID = refSysUser.sys_id;&#13;
                indexFound = -1;&#13;
                for (var icx = 0; icx &lt; singleOwnerRecords.length; icx++) {&#13;
                    var mmpa = singleOwnerRecords[icx];&#13;
                    if (mmpa['approver'] == approverID) {&#13;
                        indexFound = icx;&#13;
                        break;&#13;
                    }&#13;
                }&#13;
                if (indexFound &gt; -1) {&#13;
                    singleOwnerRecords[indexFound]['access_level_id'] = singleOwnerRecords[indexFound]['access_level_id'] + "," + accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords[indexFound]['access_level_name'] = singleOwnerRecords[indexFound]['access_level_name'] + "," + accessLevelGr.access_level_name;&#13;
					singleOwnerRecords[indexFound]['sourceid'] = singleOwnerRecords[indexFound]['sourceid'] + "###" + accessLevelGr.access_level_id;&#13;
                } else {&#13;
                    var map = {};&#13;
                    map['approver'] = approverID;&#13;
                    map['access_level_id'] = accessLevelGr.access_level_id;&#13;
                    map['access_level_name'] = accessLevelGr.access_level_name;&#13;
					map['sourceid'] = accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords.push(map);&#13;
                }&#13;
            }&#13;
        }&#13;
        if (count &gt; 1) {&#13;
			gs.info(accessLevelGr.access_level_name +"  has multiple Area owners");&#13;
            var buildingAccessTask = new GlideRecordSecure('x_aleen_alertsnowp_building_access_task');&#13;
            buildingAccessTask.access_level_id = accessLevelGr.access_level_id;&#13;
            buildingAccessTask.access_level_name = accessLevelGr.access_level_name;&#13;
			buildingAccessTask.sourceid = accessLevelGr.access_level_id;&#13;
            buildingAccessTask.needapproval = needApproval;&#13;
            buildingAccessTask.parent_number = current.number;&#13;
            buildingAccessTask.access_end_date = current.access_end_date;&#13;
            buildingAccessTask.access_start_date = current.access_start_date;&#13;
            buildingAccessTask.request_for = current.request_for;&#13;
            buildingAccessTask.notes = current.notes;&#13;
            buildingAccessTask.reason = current.reason;&#13;
            buildingAccessTask.sys_created_on = new GlideDateTime();&#13;
            buildingAccessTask.sys_updated_on = new GlideDateTime();&#13;
            buildingAccessTask.insert();&#13;
        }&#13;
    }&#13;
	}&#13;
}&#13;
for (var icc = 0; icc &lt; singleOwnerRecords.length; icc++) {&#13;
    var mapva = singleOwnerRecords[icc];&#13;
    var buildingAccTask = new GlideRecordSecure('x_aleen_alertsnowp_building_access_task');&#13;
    buildingAccTask.access_level_id = mapva['access_level_id'];&#13;
    buildingAccTask.access_level_name = mapva['access_level_name'];&#13;
	buildingAccTask.sourceid = mapva['sourceid'];&#13;
    buildingAccTask.needapproval = true;&#13;
    buildingAccTask.parent_number = current.number;&#13;
    buildingAccTask.access_end_date = current.access_end_date;&#13;
    buildingAccTask.access_start_date = current.access_start_date;&#13;
    buildingAccTask.request_for = current.request_for;&#13;
    buildingAccTask.notes = current.notes;&#13;
    buildingAccTask.reason = current.reason;&#13;
    buildingAccTask.sys_created_on = new GlideDateTime();&#13;
    buildingAccTask.sys_updated_on = new GlideDateTime();&#13;
    buildingAccTask.insert();&#13;
    singleOwnerRecords.splice(icc, 1);&#13;
    --icc;&#13;
}&#13;
for (var iccl = 0; iccl &lt; lowAccessLevelRecords.length; iccl++) {&#13;
    var mapval = lowAccessLevelRecords[iccl];&#13;
    var lowbuildingAccTask = new GlideRecordSecure('x_aleen_alertsnowp_building_access_task');&#13;
    lowbuildingAccTask.access_level_id = mapval['access_level_id'];&#13;
    lowbuildingAccTask.access_level_name = mapval['access_level_name'];&#13;
	lowbuildingAccTask.sourceid = mapval['sourceid'];&#13;
    lowbuildingAccTask.needapproval = false;&#13;
    lowbuildingAccTask.parent_number = current.number;&#13;
    lowbuildingAccTask.access_end_date = current.access_end_date;&#13;
    lowbuildingAccTask.access_start_date = current.access_start_date;&#13;
    lowbuildingAccTask.request_for = current.request_for;&#13;
    lowbuildingAccTask.notes = current.notes;&#13;
    lowbuildingAccTask.reason = current.reason;&#13;
    lowbuildingAccTask.sys_created_on = new GlideDateTime();&#13;
    lowbuildingAccTask.sys_updated_on = new GlideDateTime();&#13;
    lowbuildingAccTask.insert();&#13;
    lowAccessLevelRecords.splice(iccl, 1);&#13;
    --iccl;&#13;
}</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>ddc9ecca1b8d4e106962fe60cd4bcb46</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>51c9ecca1b8d4e106962fe60cd4bcb47</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>var accessLevels = current.access_levels;&#13;
var accessLevelsList = accessLevels.split(',');&#13;
var singleOwnerRecords = [];&#13;
var lowAccessLevelRecords = [];&#13;
var needApproval = false;&#13;
for (var i = 0; i &lt; accessLevelsList.length; i++) {&#13;
    needApproval = false;&#13;
	gs.info(accessLevelsList[i]);&#13;
	var accessLevelLocationGr = new GlideRecordSecure('x_aleen_alertsnowp_accesslocations');&#13;
    if (accessLevelLocationGr.get(accessLevelsList[i])) {&#13;
	gs.info("got accesslevel Location record  of " + accessLevelLocationGr.access_level_name);&#13;
    var accessLevelGr = new GlideRecordSecure('x_aleen_alertsnowp_access_levels');&#13;
    if (accessLevelGr.get(accessLevelLocationGr.access_level)) {&#13;
        var count = 0;&#13;
        var gr = new GlideAggregate('x_aleen_alertsnowp_area_owners');&#13;
        gr.addQuery('access_level_id', accessLevelGr.access_level_id);&#13;
        gr.addAggregate('COUNT');&#13;
        gr.query();&#13;
        while (gr.next()) {&#13;
            count = gr.getAggregate('COUNT');&#13;
        }&#13;
        if (count == 0) {&#13;
			gs.info(accessLevelGr.access_level_name +"  has no Area owners");&#13;
            if (accessLevelGr.criticality == "LOW") {&#13;
                if (lowAccessLevelRecords.length &gt; 0) {&#13;
                    lowAccessLevelRecords[0]['access_level_id'] = lowAccessLevelRecords[0]['access_level_id'] + "," + accessLevelGr.access_level_id;&#13;
                    lowAccessLevelRecords[0]['access_level_name'] = lowAccessLevelRecords[0]['access_level_name'] + "," + accessLevelGr.access_level_name;&#13;
					lowAccessLevelRecords[0]['sourceid'] = lowAccessLevelRecords[0]['sourceid'] + "###" + accessLevelGr.access_level_id;&#13;
                } else {&#13;
                    var lmap = {};&#13;
                    lmap['access_level_id'] = accessLevelGr.access_level_id;&#13;
                    lmap['access_level_name'] = accessLevelGr.access_level_name;&#13;
					lmap['sourceid'] = accessLevelGr.access_level_id;&#13;
                    lowAccessLevelRecords.push(lmap);&#13;
                }&#13;
            } else {&#13;
                needApproval = true;&#13;
                foundIndex = -1;&#13;
                for (var icv = 0; icv &lt; singleOwnerRecords.length; icv++) {&#13;
                    if (singleOwnerRecords[icv]['approver'] === "DEFAULT") {&#13;
                        foundIndex = icv;&#13;
                        break;&#13;
                    }&#13;
                }&#13;
                if (foundIndex &gt; -1) {&#13;
                    singleOwnerRecords[foundIndex]['access_level_id'] = singleOwnerRecords[foundIndex]['access_level_id'] + "," + accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords[foundIndex]['access_level_name'] = singleOwnerRecords[foundIndex]['access_level_name'] + "," + accessLevelGr.access_level_name;&#13;
					singleOwnerRecords[foundIndex]['sourceid'] = singleOwnerRecords[foundIndex]['sourceid'] + "###" + accessLevelGr.access_level_id;&#13;
                } else {&#13;
                    var mapa = {};&#13;
                    mapa['approver'] = "DEFAULT";&#13;
                    mapa['access_level_id'] = accessLevelGr.access_level_id;&#13;
                    mapa['access_level_name'] = accessLevelGr.access_level_name;&#13;
					mapa['sourceid'] = accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords.push(mapa);&#13;
                }&#13;
            }&#13;
        } else {&#13;
            needApproval = true;&#13;
        }&#13;
        if (count == 1) {&#13;
			gs.info(accessLevelGr.access_level_name +"  has one Area owner");&#13;
            var grAO = new GlideRecordSecure('x_aleen_alertsnowp_area_owners');&#13;
            grAO.addQuery('access_level_id', accessLevelGr.access_level_id);&#13;
            grAO.query();&#13;
            while (grAO.next()) {&#13;
                var refSysUser = grAO.owner.getRefRecord();&#13;
                var approverID = refSysUser.sys_id;&#13;
                indexFound = -1;&#13;
                for (var icx = 0; icx &lt; singleOwnerRecords.length; icx++) {&#13;
                    var mmpa = singleOwnerRecords[icx];&#13;
                    if (mmpa['approver'] == approverID) {&#13;
                        indexFound = icx;&#13;
                        break;&#13;
                    }&#13;
                }&#13;
                if (indexFound &gt; -1) {&#13;
                    singleOwnerRecords[indexFound]['access_level_id'] = singleOwnerRecords[indexFound]['access_level_id'] + "," + accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords[indexFound]['access_level_name'] = singleOwnerRecords[indexFound]['access_level_name'] + "," + accessLevelGr.access_level_name;&#13;
					singleOwnerRecords[indexFound]['sourceid'] = singleOwnerRecords[indexFound]['sourceid'] + "###" + accessLevelGr.access_level_id;&#13;
                } else {&#13;
                    var map = {};&#13;
                    map['approver'] = approverID;&#13;
                    map['access_level_id'] = accessLevelGr.access_level_id;&#13;
                    map['access_level_name'] = accessLevelGr.access_level_name;&#13;
					map['sourceid'] = accessLevelGr.access_level_id;&#13;
                    singleOwnerRecords.push(map);&#13;
                }&#13;
            }&#13;
        }&#13;
        if (count &gt; 1) {&#13;
			gs.info(accessLevelGr.access_level_name +"  has multiple Area owners");&#13;
            var buildingAccessTask = new GlideRecordSecure('x_aleen_alertsnowp_building_access_task');&#13;
            buildingAccessTask.access_level_id = accessLevelGr.access_level_id;&#13;
            buildingAccessTask.access_level_name = accessLevelGr.access_level_name;&#13;
			buildingAccessTask.sourceid = accessLevelGr.access_level_id;&#13;
            buildingAccessTask.needapproval = needApproval;&#13;
            buildingAccessTask.parent_number = current.number;&#13;
            buildingAccessTask.access_end_date = current.access_end_date;&#13;
            buildingAccessTask.access_start_date = current.access_start_date;&#13;
            buildingAccessTask.request_for = current.request_for;&#13;
            buildingAccessTask.notes = current.notes;&#13;
            buildingAccessTask.reason = current.reason;&#13;
            buildingAccessTask.sys_created_on = new GlideDateTime();&#13;
            buildingAccessTask.sys_updated_on = new GlideDateTime();&#13;
            buildingAccessTask.insert();&#13;
        }&#13;
    }&#13;
	}&#13;
}&#13;
for (var icc = 0; icc &lt; singleOwnerRecords.length; icc++) {&#13;
    var mapva = singleOwnerRecords[icc];&#13;
    var buildingAccTask = new GlideRecordSecure('x_aleen_alertsnowp_building_access_task');&#13;
    buildingAccTask.access_level_id = mapva['access_level_id'];&#13;
    buildingAccTask.access_level_name = mapva['access_level_name'];&#13;
	buildingAccTask.sourceid = mapva['sourceid'];&#13;
    buildingAccTask.needapproval = true;&#13;
    buildingAccTask.parent_number = current.number;&#13;
    buildingAccTask.access_end_date = current.access_end_date;&#13;
    buildingAccTask.access_start_date = current.access_start_date;&#13;
    buildingAccTask.request_for = current.request_for;&#13;
    buildingAccTask.notes = current.notes;&#13;
    buildingAccTask.reason = current.reason;&#13;
    buildingAccTask.sys_created_on = new GlideDateTime();&#13;
    buildingAccTask.sys_updated_on = new GlideDateTime();&#13;
    buildingAccTask.insert();&#13;
    singleOwnerRecords.splice(icc, 1);&#13;
    --icc;&#13;
}&#13;
for (var iccl = 0; iccl &lt; lowAccessLevelRecords.length; iccl++) {&#13;
    var mapval = lowAccessLevelRecords[iccl];&#13;
    var lowbuildingAccTask = new GlideRecordSecure('x_aleen_alertsnowp_building_access_task');&#13;
    lowbuildingAccTask.access_level_id = mapval['access_level_id'];&#13;
    lowbuildingAccTask.access_level_name = mapval['access_level_name'];&#13;
	lowbuildingAccTask.sourceid = mapval['sourceid'];&#13;
    lowbuildingAccTask.needapproval = false;&#13;
    lowbuildingAccTask.parent_number = current.number;&#13;
    lowbuildingAccTask.access_end_date = current.access_end_date;&#13;
    lowbuildingAccTask.access_start_date = current.access_start_date;&#13;
    lowbuildingAccTask.request_for = current.request_for;&#13;
    lowbuildingAccTask.notes = current.notes;&#13;
    lowbuildingAccTask.reason = current.reason;&#13;
    lowbuildingAccTask.sys_created_on = new GlideDateTime();&#13;
    lowbuildingAccTask.sys_updated_on = new GlideDateTime();&#13;
    lowbuildingAccTask.insert();&#13;
    lowAccessLevelRecords.splice(iccl, 1);&#13;
    --iccl;&#13;
}</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Access Level Task for Area Owner">ddc9ecca1b8d4e106962fe60cd4bcb46</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>55c9ecca1b8d4e106962fe60cd4bcb47</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="End">c7a66f7d0a0a0b3a004544a6d2f14076</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>2</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>End</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>1dc9ecca1b8d4e106962fe60cd4bcb47</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:41:41</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="Alert Building Access">ddc924ca1b8d4e106962fe60cd4bcb22</workflow_version>
        <x>692</x>
        <y>134</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=1dc9ecca1b8d4e106962fe60cd4bcb47"/>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>6</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Set manger as  Assigned To</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>55c9ecca1b8d4e106962fe60cd4bcb45</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:41:25</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Alert Building Access">ddc924ca1b8d4e106962fe60cd4bcb22</workflow_version>
        <x>152</x>
        <y>58</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=55c9ecca1b8d4e106962fe60cd4bcb45"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>55c9ecca1b8d4e106962fe60cd4bcb45</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d9c9ecca1b8d4e106962fe60cd4bcb45</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>gs.info("Setting manager");&#13;
current.assigned_to=current.request_for.manager;</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>55c9ecca1b8d4e106962fe60cd4bcb45</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d9c9ecca1b8d4e106962fe60cd4bcb45</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>gs.info("Setting manager");&#13;
current.assigned_to=current.request_for.manager;</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Set manger as  Assigned To">55c9ecca1b8d4e106962fe60cd4bcb45</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>95c9ecca1b8d4e106962fe60cd4bcb46</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Wait for condition">d93a02ae0a0a0aa30077abad3fdac035</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>9</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Wait for all Area Owners action</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>ddc9ecca1b8d4e106962fe60cd4bcb4d</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:41:38</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Alert Building Access">ddc924ca1b8d4e106962fe60cd4bcb22</workflow_version>
        <x>621</x>
        <y>0</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=ddc9ecca1b8d4e106962fe60cd4bcb4d"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>ddc9ecca1b8d4e106962fe60cd4bcb4d</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>95c9ecca1b8d4e106962fe60cd4bcb4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>state!=1^EQ</value>
        <variable display_value="Condition">c35dc4cd0a0a0ba96248a70990c1ac54</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>ddc9ecca1b8d4e106962fe60cd4bcb4d</document_key>
        <order>2</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d1c9ecca1b8d4e106962fe60cd4bcb4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>// Set the variable 'answer' to true or false to indicate if the condition has been met or not.&#13;
answer = true;</value>
        <variable display_value="Condition script">c35debce0a0a0ba96248a709440cf31a</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>ddc9ecca1b8d4e106962fe60cd4bcb4d</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>95c9ecca1b8d4e106962fe60cd4bcb4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>state!=1^EQ</value>
        <variable display_value="Condition">c35dc4cd0a0a0ba96248a70990c1ac54</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>ddc9ecca1b8d4e106962fe60cd4bcb4d</document_key>
        <order>2</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d1c9ecca1b8d4e106962fe60cd4bcb4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <value>// Set the variable 'answer' to true or false to indicate if the condition has been met or not.&#13;
answer = true;</value>
        <variable display_value="Condition script">c35debce0a0a0ba96248a709440cf31a</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Wait for all Area Owners action">ddc9ecca1b8d4e106962fe60cd4bcb4d</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>1dc9ecca1b8d4e106962fe60cd4bcb4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
    </wf_condition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">99c9ecca1b8d4e106962fe60cd4bcb4f</condition>
        <from display_value="Begin">d1c9ecca1b8d4e106962fe60cd4bcb4f</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>11c9ecca1b8d4e106962fe60cd4bcb61</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <to display_value="Set manger as  Assigned To">55c9ecca1b8d4e106962fe60cd4bcb45</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">1dc9ecca1b8d4e106962fe60cd4bcb4e</condition>
        <from display_value="Wait for all Area Owners action">ddc9ecca1b8d4e106962fe60cd4bcb4d</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>9dc9ecca1b8d4e106962fe60cd4bcb5f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <to display_value="End">1dc9ecca1b8d4e106962fe60cd4bcb47</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">95c9ecca1b8d4e106962fe60cd4bcb46</condition>
        <from display_value="Set manger as  Assigned To">55c9ecca1b8d4e106962fe60cd4bcb45</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d5c9ecca1b8d4e106962fe60cd4bcb60</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:41:12</sys_updated_on>
        <to display_value="Create Access Level Task for Area Owner">ddc9ecca1b8d4e106962fe60cd4bcb46</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">55c9ecca1b8d4e106962fe60cd4bcb47</condition>
        <from display_value="Create Access Level Task for Area Owner">ddc9ecca1b8d4e106962fe60cd4bcb46</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>d9c9ecca1b8d4e106962fe60cd4bcb5f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <to display_value="Wait for all Area Owners action">ddc9ecca1b8d4e106962fe60cd4bcb4d</to>
    </wf_transition>
    <wf_estimated_runtime_config action="INSERT_OR_UPDATE">
        <estimated_run_time/>
        <no_of_data_points>1</no_of_data_points>
        <percentage_threshold_ert>20</percentage_threshold_ert>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-21 05:40:48</sys_created_on>
        <sys_id>15c924ca1b8d4e106962fe60cd4bcb23</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-21 05:40:48</sys_updated_on>
        <workflow_version display_value="Alert Building Access">ddc924ca1b8d4e106962fe60cd4bcb22</workflow_version>
    </wf_estimated_runtime_config>
    <wf_workflow_version action="update_multiple" query="workflow=0a0daca21bbe81108dcc755e034bcbe8^sys_id!=ddc924ca1b8d4e106962fe60cd4bcb22">
        <published>false</published>
    </wf_workflow_version>
</record_update>
